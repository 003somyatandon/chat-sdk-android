apply plugin: 'android'

android {
    compileSdkVersion 19
    buildToolsVersion '19.1.0'
    signingConfigs {

        debug {
            //TODO create a key for this SDK and not use my own.
            storeFile file('/home/braunster/Android/braunserkey')
            keyAlias 'braunsteralias'
            keyPassword 'Itzikbraun1991'
            storePassword 'Itzikbraun1991'
        }

        release {
            storeFile file('/home/braunster/Android/braunserkey')
            keyAlias 'braunsteralias'
            keyPassword 'Itzikbraun1991'
            storePassword 'Itzikbraun1991'
        }
    }
    defaultConfig {
        minSdkVersion Integer.parseInt(project.MIN_SDK)
        targetSdkVersion 19
        versionCode 1
        versionName '0.2.8'
    }
    buildTypes {
        release {
            runProguard false
            proguardFiles getDefaultProguardFile('proguard-android.txt'), 'proguard-rules.txt'
            signingConfig signingConfigs.release
            debuggable false
            jniDebugBuild false
            zipAlign true
        }
    }
    packagingOptions {
        exclude 'META-INF/DEPENDENCIES'
        exclude 'META-INF/NOTICE'
        exclude 'META-INF/LICENSE'
        exclude 'META-INF/LICENSE.txt'
        exclude 'META-INF/NOTICE.txt'
    }
    productFlavors {
    }
}

dependencies {
    compile fileTree(dir: 'libs', include: ['*.jar'])
    compile 'com.android.support:appcompat-v7:19.+'
    compile project(':sdk')
}


//task askForPasswords << {
//    // Must create String because System.readPassword() returns char[]
//    // (and assigning that below fails silently)
//    def storePw = new String(System.console().readPassword("Keystore password: "))
//    def keyPw  = new String(System.console().readPassword("Key password: "))
//
//    android.signingConfigs.release.storePassword = storePw
//    android.signingConfigs.release.keyPassword = keyPw
//}
//
//tasks.whenTaskAdded { theTask ->
//    if (theTask.name.equals("packageRelease")) {
//        theTask.dependsOn "askForPasswords"
//    }
//}
